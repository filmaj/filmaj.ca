<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>PhoneGap: Android Development Trench Wars</title>

  <meta name="viewport" content="width=device-width"/>

  <link rel="stylesheet" href="./css/reset.css" type="text/css"/>
  <link rel="stylesheet" href="./css/showoff.css" type="text/css"/>

  <script type="text/javascript" src="./js/jquery-1.4.2.min.js"></script>
  <script type="text/javascript" src="./js/jquery.cycle.all.js"></script>
	<script type="text/javascript" src="./js/jquery-print.js"></script>
  <script type="text/javascript" src="./js/jquery.batchImageLoad.js"></script>

  <script type="text/javascript" src="./js/jquery.doubletap-0.1.js"></script>

  <script type="text/javascript" src="./js/fg.menu.js"></script>
  <script type="text/javascript" src="./js/showoff.js"></script>
  <script type="text/javascript" src="./js/jTypeWriter.js"> </script>
  <script type="text/javascript" src="./js/sh_main.min.js"></script>
  <script type="text/javascript" src="./js/core.js"></script>
  <script type="text/javascript" src="./js/showoffcore.js"></script>
  <script type="text/javascript" src="./js/coffee-script.js"></script>

  <link type="text/css" href="./css/fg.menu.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/theme/ui.all.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/sh_style.css" rel="stylesheet" >

  

  

  <script type="text/javascript">
  $(function(){
      setupPreso(false, './');
  });
  </script>

</head>

<body>

<a tabindex="0" href="#search-engines" class="fg-button fg-button-icon-right ui-widget ui-state-default ui-corner-all" id="navmenu"><span class="ui-icon ui-icon-triangle-1-s"></span>slides</a>
<div id="navigation" class="hidden"></div>

<div id="help">
  <table>
    <tr><td class="key">z, ?</td><td>toggle help (this)</td></tr>
    <tr><td class="key">space, &rarr;</td><td>next slide</td></tr>
    <tr><td class="key">shift-space, &larr;</td><td>previous slide</td></tr>
    <tr><td class="key">d</td><td>toggle debug mode</td></tr>
    <tr><td class="key">## &lt;ret&gt;</td><td>go to slide #</td></tr>
    <tr><td class="key">c, t</td><td>table of contents (vi)</td></tr>
    <tr><td class="key">f</td><td>toggle footer</td></tr>
    <tr><td class="key">r</td><td>reload slides</td></tr>
    <tr><td class="key">n</td><td>toggle notes</td></tr>
    <tr><td class="key">p</td><td>run preshow</td></tr>
  </table>
</div>

<div class="buttonNav">
  <input type="submit" onClick="prevStep();" value="prev"/>
  <input type="submit" onClick="nextStep();" value="next"/>
</div>

<div id="preso">loading presentation...</div>
<div id="footer">
  <span id="slideInfo"></span>
  <span id="debugInfo"></span>
  <span id="notesInfo"></span>
</div>

<div id="slides" class="offscreen" style="display:none;">
<div class="slide" data-transition="none"><div class="content center" ref="intro/01/1">
<h1>PhoneGap: Android Development Trench Wars</h1>

<p><img src="./file/intro/../img/PhoneGapLogo.png" width="512" height="512" alt="phonegap"/></p>

<p>Filip Maj
Nitobi</p>
</div>
</div><div class="slide" data-transition="none"><div class="content center" ref="intro/01/2">
<h1>@filmaj</h1>

<p><img src="./file/intro/../img/bungee.jpg" width="640" height="427" alt="fil"/></p>

<h2>work at Nitobi (Vancouver, Canada, eh)</h2>

<h2>JavaScript, AI, hockey, beer</h2>
</div>
</div><div class="slide" data-transition="none"><div class="content center" ref="intro/01/3">
<h1><em>WARNING</em></h1>

<h2>i swear during my presentations</h2>

<h3>if you're easily offended you should probably take a break</h3>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="intro/01/4">
<h1>btw, Sweden rocks</h1>

<h2>it's so gorgeous here!</h2>

<h2>as a (Vancouver) hockey fan... thank you</h2>

<p><img src="./file/intro/../img/sedins.jpg" width="300" height="184" alt="sedins"/></p>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="intro/02/1">
<h1>wtf is PhoneGap?</h1>

<ul>
<li>build native apps...</li>
<li>...using web tech...</li>
<li>...on six platforms...</li>
<li>...and access native APIs through JavaScript</li>
<li>Android, iOS, BlackBerry, Bada, Symbian, webOS</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content" ref="intro/02/2">
<p class="notes">how many web devs here?</p>

<h1>why the web?</h1>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="intro/02/3">
<h1>we believe in openness and freedom</h1>
</div>
</div><div class="slide" data-transition="none"><div class="content center" ref="intro/02/4">
<h2>not everyone does</h2>

<p><img src="./file/intro/../img/jobs1984.jpg" width="500" height="370" alt="jobs"/></p>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="intro/02/5">
<h1>the web and Nitobi</h1>

<ul>
<li>quick history lesson:</li>
<li>Nitobi is a web shop (12+ years now, 15-20 people)</li>
<li>2008: iPhone explodes in North America</li>
<li>market emerges</li>
<li>... but Nitobi wanted to reuse existing web skills</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="intro/02/6">
<h1>so we started hacking</h1>

<ul>
<li>summer 2008: iPhoneDevCamp, came basic iOS support</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content center" ref="intro/02/7">
<h1>Nitobi hard at work</h1>

<p><img src="./file/intro/../img/brock.jpg" width="1024" height="680" alt="brock"/></p>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="intro/02/8">
<h1>hacking continued</h1>

<ul>
<li>later that year: Android 1.5</li>
<li>bit later again: BlackBerry 4.6 and 5.0</li>
<li>then Symbian, webOS, fledgling Windows Mobile</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content center" ref="intro/02/9">
<h1>WebKit will be the platform of the mobile web</h1>

<p><img src="./file/intro/../img/webkit.png" width="215" height="174" alt="webkit"/></p>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="intro/02/10">
<h1>WebKit on mobile</h1>

<ul>
<li>Android</li>
<li>iOS</li>
<li>BlackBerry 6+ (probably the best mobile WebKit browser)</li>
<li>others I'm probably forgetting</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content center" ref="intro/02/11">
<p class="notes">image actually not a bad idea, talk a bit about how each
platform implements</p>

<h1>PhoneGap is a hack</h1>

<p><img src="./file/intro/../img/phonetoilet.jpg" width="451" height="600" alt="phonebooth-toiler"/></p>

<h3>key: PhoneGap.exec method in JavaScript</h3>

<pre class="sh_javascript"><code>PhoneGap.exec(class, method, win, fail, arguments)</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="intro/02/12">
<h1>iOS</h1>

<pre><code>// We catch urls of the following form on
// native side:

gap://class + '/' + method + '/' + arguments

// We get this method on the WebView:

evaluateJavascriptFromStringByStringAndMakeThisMethodNameAsVerboseAsPossibl
</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="intro/02/13">
<h1>Android</h1>

<h3>WebView!</h3>

<pre class="sh_java"><code>WebView.loadUrl("javascript" + 
  ":alert('android only!');");
WebView.addJavascriptInterface(
  /* arbitrary Java object */);</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="implementation/01/1">
<p class="notes">Samsung and Motorola made changes to their webview codebase in mystical ways</p>

<h1>And So The Trench Wars Started</h1>

<ul>
<li>new Android versions came out</li>
<li>tons of Android devices hit the market</li>
<li>device manufacturers started forking Android</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content center" ref="implementation/01/2">
<h2>this is a tale of perseverance</h2>

<p><img src="./file/implementation/../img/perseverance.jpg" width="750" height="600" alt="perseverance"/></p>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="implementation/01/3">
<h1>Part 1: <code>loadUrl</code></h1>

<ul>
<li>remember: <code>WebView.loadUrl</code> used to trigger JavaScript from Android Java</li>
<li>for sensor APIs, this may fire a lot (think accelerometer)</li>
<li>problem #1: <code>loadUrl</code> hides the soft keyboard</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content center" ref="implementation/01/4">
<h1>fuck.</h1>

<p><img src="./file/implementation/../img/exitfail.jpg" width="375" height="500" alt="exit-fail"/></p>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="implementation/01/5">
<h1>Part 2: <code>addJavascriptInterface</code></h1>

<p class="notes">interestingly parts 1 &amp; 2 started becoming problems around the same time, and they are each a method in JS -&gt; native communication</p>

<ul>
<li><code>addJavascriptInterface</code> goes the other way: JavaScript to Java</li>
<li>problem #2: in Android 2.3 emulators and some devices, calling would crash the app</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content center" ref="implementation/01/6">
<h1>ffffuuuuuuuuuuuu</h1>

<p><img src="./file/implementation/../img/fu.jpeg" width="240" height="200" alt="fu"/></p>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="implementation/01/7">
<h1>it's ok guys, IBM's got this</h1>

<ul>
<li>we're lucky IBM contributes to PhoneGap</li>
<li>they rebuilt the whole thing, now we use a callback server</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="implementation/01/8">
<h1>wtf is the callback server?</h1>

<ul>
<li>instantiate a tiny HTTP server on the Android device</li>
<li>within app, from JavaScript XHR to the server via localhost</li>
<li>BOOM: JavaScript to Java</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="implementation/01/9">
<h1>Part 3: Callback Server</h1>

<ul>
<li>... yeah it doesn't work everywhere</li>
<li>but again IBM to the rescue</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content center" ref="implementation/01/10">
<h1>the hack of hacks</h1>

<p><img src="./file/implementation/../img/lawnmower.jpg" width="500" height="401" alt="lawnmower"/></p>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="implementation/01/11">
<h2>ready for this?</h2>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="implementation/01/12">
<h1>prompt()</h1>

<pre class="sh_javascript"><code>prompt(this.stringify(args),
  "gap:"+this.stringify([service,
  action, callbackId, true]));</code></pre>

<ul>
<li>any hack to get JS &lt;--&gt; native talking working, we'll do it</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="implementation/01/13">
<h1>PhoneGap Android Today</h1>

<ul>
<li>now we use a combination of prompt() and callback server</li>
<li>no problems...</li>
<li>...yet ;)</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="dive/01/1">
<h1>PhoneGap on Android</h1>

<ul>
<li>How to take advantage of Android-specific stuff using PhoneGap, a cross-platform development framework?</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="dive/01/2">
<h1>PhoneGap Plugins</h1>

<ul>
<li>you can call into any native code you wish</li>
<li>just because it's cross platform doesn't mean you can't enhance it</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content" ref="dive/01/3">
<h2>PhoneGap Plugin: Java</h2>

<pre class="sh_java"><code>package com.phonegap.plugintest
import com.phonegap.*

public class MyPlugin extends Plugin
// ...
@Override
public PluginResult execute(String action,
  JSONArray args, String callbackId)</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content smaller" ref="dive/01/4">
<h2>PhoneGap Plugin: JavaScript, pt. 1</h2>

<pre class="sh_javascript"><code>navigator.app.addService("com.phonegap.plugintest.MyPlugin",
  "MyPlugin")
// ^^^ will dynamically instantiate your native plugin class</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="dive/01/5">
<h2>PhoneGap Plugin: JavaScript, pt. 2</h2>

<pre class="sh_javascript"><code>function myPlugin() {};
myPlugin.prototype = {
  doStuff:function(win, fail, argument) {
    PhoneGap.exec(win, fail, "MyPlugin",
      "someAction", argument);
  }
}</code></pre>

<h3>Moar plugins: <a href="http://www.github.com/phonegap/phonegap-plugins">http://www.github.com/phonegap/phonegap-plugins</a></h3>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="dive/01/6">
<h1>Android Hardware Key Events</h1>

<pre class="sh_javascript"><code>document.addEventListener("backbutton",
  function() { alert('back!'); }, false);</code></pre>

<ul>
<li><code>"backbutton"</code></li>
<li><code>"menubutton"</code></li>
<li><code>"searchbutton"</code></li>
<li>no <code>"homebutton"</code> :)</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="dive/01/7">
<h1>Speaking of menu ...</h1>

<ul>
<li>we are working on implementing the HTML5 <code>&lt;menu&gt;</code> spec in PhoneGap</li>
<li>cross-platform context menus via markup (ideally)</li>
<li>would apply to platforms with context menus: e.g. Android &amp; BlackBerry</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="dive/01/8">
<p class="notes">when changing flag, behaviour is similar to iOS 4 tombstoned apps; JS timers and other such tasks are paused</p>

<h1>App Lifecycle Events</h1>

<pre class="sh_javascript"><code>document.addEventListener("pause",
  function() { alert('paused!'); }, false);</code></pre>

<ul>
<li><code>"resume"</code></li>
<li>by default, your app <em>does</em> run in the background</li>
<li>you can change this by setting a flag in native code in your app</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="dive/01/9">
<h1>Some Good PhoneGap Android Plugins</h1>

<ul>
<li><a href="https://github.com/phonegap/phonegap-plugins/tree/master/Android/BarcodeScanner">BarcodeScanner</a></li>
<li><a href="https://github.com/phonegap/phonegap-plugins/tree/master/Android/ContactView">ContactViewer</a></li>
<li><a href="https://github.com/phonegap/phonegap-plugins/tree/master/Android/TTS">Text-to-speech</a></li>
<li><a href="https://github.com/saileshmittal/phonegap-system-notification-plugin">System Notifications</a></li>
<li>and my favourite...</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="dive/01/10">
<h1>WebIntent</h1>

<ul>
<li><a href="https://github.com/phonegap/phonegap-plugins/tree/master/Android/WebIntent">https://github.com/phonegap/phonegap-plugins/tree/master/Android/WebIntent</a></li>
<li>a hook into the native Intent system within PhoneGap - super cool!</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="outro/01/1">
<p class="notes">please help!</p>

<h1>PhoneGap project info</h1>

<ul>
<li>MIT licensed</li>
<li>all code on <a href="http://github.com/phonegap">http://github.com/phonegap</a></li>
<li>wiki: <a href="http://wiki.phonegap.com">http://wiki.phonegap.com</a></li>
<li>docs: <a href="http://docs.phonegap.com">http://docs.phonegap.com</a></li>
<li>irc: irc.freenode.net, #phonegap</li>
<li>contributors: IBM, Palm, Sony</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content center" ref="outro/01/2">
<h1>PhoneGap Build</h1>

<p><img src="./file/outro/../img/build.png" width="654" height="250" alt="build"/></p>
</div>
</div><div class="slide" data-transition="none"><div class="content smbullets incremental" ref="outro/01/3">
<h1>PhoneGap Build breakdown</h1>

<ul>
<li>upload HTML/CSS/JS assets, or hook up to a git repo</li>
<li>your assets queued up for building in the cloud</li>
<li>get back native packages for six platforms</li>
<li>in beta, so its free right now</li>
<li>in the future, open source projects can be built for free :D</li>
<li>also there's an API for integration into build systems</li>
<li>and you can "live debug"</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="outro/01/4">
<h1>PhoneGap Support</h1>

<ul>
<li>if you need support, see <a href="http://www.phonegap.com/services">http://www.phonegap.com/services</a></li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content center" ref="outro/01/5">
<h1>Tack, <em>eh</em></h1>

<h3>@filmaj on the twitters</h3>

<h3>fil.maj@nitobi.com</h3>

<h3>github.com/filmaj</h3>

<h3>filmaj on irc.freenode.net #phonegap</h3>

<p><img src="./file/outro/../img/beer.jpg" width="500" height="400" alt="beer"/></p>
</div>
</div></div>
<script type="text/javascript">
    var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-27149382-1']);
            _gaq.push(['_trackPageview']);

                (function() {
                          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                                      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                                          })();
                                            </script>
</body>
</html>
